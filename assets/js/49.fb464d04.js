(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{243:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[s._v("#")]),s._v(" 环境变量")]),s._v(" "),a("p",[s._v("场景：前端除了开发环境，生产环境之外再增加一个灰度测试环境。")]),s._v(" "),a("p",[s._v("解决方案：vue-cli 可以识别"),a("code",[s._v("VUE_APP_*")]),s._v("这种以 VUE*APP 开头的环境变量，然后在客户端代码里调用"),a("code",[s._v("process.env.VUE_APP*\\*")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("新建"),a("code",[s._v(".env.development")]),s._v(" "),a("code",[s._v(".env.gray")]),s._v(" "),a("code",[s._v(".env.production")]),s._v("三个文件")]),s._v(" "),a("p",[a("code",[s._v(".env.development")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("VUE_APP_ENV")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("code",[s._v(".env.gray")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("VUE_APP_ENV=gray\n")])])]),a("p",[a("code",[s._v(".env.production")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("VUE_APP_ENV=production\n")])])])]),s._v(" "),a("li",[a("p",[s._v("在客户端代码内获取 process.env.VUE_APP_GRAY 的值做对应的逻辑处理")])]),s._v(" "),a("li",[a("p",[s._v("在 npm script 里添加专用命令")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"gray"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"set VUE_APP_GRAY=gray && vue-cli-service build --dest=grayDist"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("执行"),a("code",[s._v("npm run gray")]),s._v("就完成了灰度构建")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);